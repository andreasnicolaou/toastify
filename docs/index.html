<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Toastify Library Example</title>
    <link rel="stylesheet" href="../dist/index.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
      .theme-toggle {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1050;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
      }
      .theme-toggle:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
      }
      .theme-icon {
        width: 24px;
        height: 24px;
        fill: currentColor;
        transition: transform 0.3s ease;
      }
      .theme-toggle:hover .theme-icon {
        transform: rotate(15deg);
      }
    </style>
  </head>
  <body>
    <button
      class="btn btn-outline-secondary theme-toggle"
      id="theme-toggle"
      type="button"
      aria-label="Toggle dark mode"
    >
      <svg class="theme-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
        <title>Toggle theme</title>
        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" />
      </svg>
    </button>
    <div class="container-xl p-3">
      <div class="card shadow-sm mb-4">
        <div class="card-body">
          <h1 class="text-center mb-4" style="padding-left: 50px; padding-right: 50px">Toastify Library Demo</h1>
          <div class="alert alert-info" role="alert">
            <strong>Live Demo:</strong> Testing the published package from npm<br />
            <strong>Package:</strong> <code class="font-monospace">@andreasnicolaou/toastify</code><br />
            <strong>CDN Source:</strong> <code class="font-monospace">../dist/index.umd.min.js</code><br />
            <strong>Global Variable:</strong> <code class="font-monospace">toastify</code>
          </div>
          <h2 class="text-body-emphasis border-bottom border-secondary border-2 pb-1 mb-3 mt-4">Try It Yourself</h2>
          <div id="interactive-section">
            <!-- Toastify demo form -->
            <form id="toastify-form">
              <div class="container-fluid px-0">
                <div class="row g-3">
                  <div class="col-md-6">
                    <label for="toastPosition" class="form-label">Toast Position:</label>
                    <select id="toastPosition" class="form-select form-select">
                      <option value="top-left">Top Left</option>
                      <option value="top-right">Top Right</option>
                      <option value="top-center">Top Center</option>
                      <option value="center">Center</option>
                      <option value="bottom-left">Bottom Left</option>
                      <option value="bottom-right" selected>Bottom Right</option>
                      <option value="bottom-center">Bottom Center</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <label for="toastDirection" class="form-label">Toastify Direction:</label>
                    <select id="toastDirection" class="form-select form-select">
                      <option value="ltr" selected>LTR</option>
                      <option value="rtl">RTL</option>
                    </select>
                  </div>
                </div>
                <div class="row g-3 mt-0">
                  <div class="col-md-6">
                    <label for="toastType" class="form-label">Toastify Type:</label>
                    <select id="toastType" class="form-select form-select">
                      <option value="default">Default</option>
                      <option value="success" selected>Success</option>
                      <option value="warning">Warning</option>
                      <option value="info">Info</option>
                      <option value="error">Error</option>
                    </select>
                  </div>
                  <div class="col-md-6">
                    <label for="customClasses" class="form-label">Custom classes:</label>
                    <input type="text" id="customClasses" class="form-control form-control" value="" />
                  </div>
                </div>
                <div class="row g-3 mt-0">
                  <div class="col-md-6">
                    <label for="duration" class="form-label">Duration (ms):</label>
                    <input type="number" id="duration" class="form-control form-control" value="3000" />
                  </div>
                  <div class="col-md-6">
                    <label for="progressBarDuration" class="form-label">Progress Bar Duration (ms):</label>
                    <input type="number" id="progressBarDuration" class="form-control form-control" value="100" />
                  </div>
                </div>
                <div class="row g-3 mt-0">
                  <div class="col-md-6">
                    <label for="maxToasts" class="form-label">Max Toasts:</label>
                    <input type="number" id="maxToasts" class="form-control form-control" value="5" />
                  </div>
                </div>
                <div class="row g-3 mt-0">
                  <div class="col-md-12">
                    <label for="toastTitle" class="form-label">Title:</label>
                    <input type="text" id="toastTitle" class="form-control form-control" value="Test Title" />
                  </div>
                </div>
                <div class="row g-3 mt-0">
                  <div class="col-12">
                    <label for="toastMessage" class="form-label">Message:</label>
                    <textarea id="toastMessage" class="form-control form-control" rows="3">
This is a test message for the toastify notification.</textarea
                    >
                  </div>
                </div>

                <div class="row g-3 mt-0">
                  <div class="col-12 d-flex flex-wrap align-items-center gap-4">
                    <div class="form-check form-check-inline">
                      <input type="checkbox" class="form-check-input" id="withProgressBar" />
                      <label class="form-check-label" for="withProgressBar">Show Progress Bar</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input type="checkbox" class="form-check-input" id="isHtml" />
                      <label class="form-check-label" for="isHtml">Html</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input type="checkbox" class="form-check-input" id="showIcons" checked />
                      <label class="form-check-label" for="showIcons">Show Icons</label>
                    </div>
                    <div class="form-check form-check-inline">
                      <input type="checkbox" class="form-check-input" id="closeButton" checked />
                      <label class="form-check-label" for="closeButton">Show Close Button</label>
                    </div>
                  </div>
                </div>
              </div>
              <div class="d-grid gap-2 col-md-6 mx-auto my-4">
                <button class="btn btn-danger" id="toastClearButton" type="button">Clear all toasts</button>
                <button class="btn btn-primary" id="toastButton" type="button">Show Toast</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <script src="../dist/index.umd.min.js"></script>
    <script>
      let lastPosition = 'bottom-right';
      let lastCustomClasses = '';

      const getElement = (id) => document.getElementById(id);
      const getCheckedRadioValue = (name) => {
        const checkedRadio = document.querySelector(`input[name="${name}"]:checked`);
        return checkedRadio ? checkedRadio.value : '';
      };

      let toastrInstance = new toastify.ToastifyManager(
        document.getElementById('toastPosition')?.value || 'bottom-right',
        {
          duration: parseInt(getElement('duration')?.value || '3000', 10),
          progressBarDuration: parseInt(getElement('progressBarDuration')?.value || '3000', 10),
          withProgressBar: getElement('withProgressBar')?.checked ?? false,
          customClasses: getElement('customClasses')?.value || '',
          isHtml: getElement('isHtml')?.checked ?? false,
          showIcons: getElement('showIcons')?.checked ?? false,
          closeButton: getElement('closeButton')?.checked ?? false,
          direction: getElement('toastDirection')?.value || 'ltr',
          maxToasts: parseInt(getElement('maxToasts')?.value || '5', 10),
        }
      );

      document.getElementById('toastClearButton')?.addEventListener('click', () => {
        document.querySelectorAll('.noap-toastify-container').forEach((toastContainer) => {
          toastContainer.remove();
        });
        toastrInstance = new toastify.ToastifyManager(
          document.getElementById('toastPosition')?.value || 'bottom-right',
          {
            duration: parseInt(getElement('duration')?.value || '3000', 10),
            progressBarDuration: parseInt(getElement('progressBarDuration')?.value || '3000', 10),
            withProgressBar: getElement('withProgressBar')?.checked ?? false,
            customClasses: getElement('customClasses')?.value || '',
            isHtml: getElement('isHtml')?.checked ?? false,
            showIcons: getElement('showIcons')?.checked ?? false,
            closeButton: getElement('closeButton')?.checked ?? false,
            direction: getElement('toastDirection')?.value || 'ltr',
            maxToasts: parseInt(getElement('maxToasts')?.value || '5', 10),
          }
        );
      });

      document.getElementById('toastButton')?.addEventListener('click', () => {
        initToastr();
        if (!toastrInstance) return;
        const type = getElement('toastType')?.value;
        const title = getElement('toastTitle')?.value || '';
        const message = getElement('toastMessage')?.value || '';
        if (type && typeof toastrInstance[type] === 'function') {
          toastrInstance[type](title, message, {
            duration: parseInt(getElement('duration')?.value || '3000', 10),
            progressBarDuration: parseInt(getElement('progressBarDuration')?.value || '3000', 10),
            withProgressBar: getElement('withProgressBar')?.checked ?? false,
            isHtml: getElement('isHtml')?.checked ?? false,
            showIcons: getElement('showIcons')?.checked ?? false,
            closeButton: getElement('closeButton')?.checked ?? false,
            direction: getElement('toastDirection')?.value || 'ltr',
            maxToasts: parseInt(getElement('maxToasts')?.value || '5', 10),
          });
        } else {
          console.error('Invalid toast type:', type);
        }
      });

      function initToastr() {
        const position = document.getElementById('toastPosition')?.value || 'bottom-right';
        const customClasses = getElement('customClasses')?.value || '';
        if (!toastrInstance || lastPosition !== position || lastCustomClasses !== customClasses) {
          document.querySelectorAll('.noap-toastify-container').forEach((e) => e.remove());
          lastPosition = position;
          lastCustomClasses = customClasses;
          toastrInstance = new toastify.ToastifyManager(position, {
            duration: parseInt(getElement('duration')?.value || '3000', 10),
            progressBarDuration: parseInt(getElement('progressBarDuration')?.value || '3000', 10),
            withProgressBar: getElement('withProgressBar')?.checked ?? false,
            customClasses: customClasses,
            isHtml: getElement('isHtml')?.checked ?? false,
            showIcons: getElement('showIcons')?.checked ?? false,
            closeButton: getElement('closeButton')?.checked ?? false,
            direction: getElement('toastDirection')?.value || 'ltr',
            maxToasts: parseInt(getElement('maxToasts')?.value || '5', 10),
          });
        }
      }

      function setThemeIcon(theme) {
        const themeIcon = document.querySelector('.theme-icon');
        if (!themeIcon) return;
        if (theme === 'light') {
          themeIcon.innerHTML =
            '<title>Toggle theme</title><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>';
        } else {
          themeIcon.innerHTML =
            '<title>Toggle theme</title><circle cx="12" cy="12" r="5"/><path d="m15 1 2 2-2 2M6 11l-2-2 2-2M20 11l2 2-2 2M9 19l-2 2 2 2M12 3V1M12 23v-2M3 12H1M23 12h-2"/>';
        }
      }
      function applyTheme(theme) {
        document.body.setAttribute('data-bs-theme', theme);
        setThemeIcon(theme);
        localStorage.setItem('theme', theme);
      }
      document.getElementById('theme-toggle').addEventListener('click', function () {
        const body = document.body;
        const currentTheme = body.getAttribute('data-bs-theme') || 'light';
        const newTheme = currentTheme === 'light' ? 'dark' : 'light';
        applyTheme(newTheme);
      });
      document.addEventListener('DOMContentLoaded', function () {
        const savedTheme = localStorage.getItem('theme') || 'light';
        applyTheme(savedTheme);
      });
    </script>
  </body>
</html>
